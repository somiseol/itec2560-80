<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h1>Blood Reserves</h1>

    <label for="blood-group-abo">ABO Blood Group</label>
    <select id="blood-group-abo">
        <option value="A">A</option>
        <option value="AB">AB</option>
        <option value="B">B</option>
        <option value="O">O</option>
    </select>

    <br> 

    <label for="blood-group-rh">Rh Factor</label>
    <select id="blood-group-rh">
        <option value="positive">Positive</option>
        <option value="negative">Negative</option>
    </select>

    <br>
    
    <button id="get-blood-units-button">Get blood units</button>

    <div id="display-blood-units">
        <p>Blood group: <span id="blood-group-display"></span></p>
        <p>Units available: <span id="units-available"></span></p>
    </div>
    

    <script>
let bloodGroupAboInput = document.querySelector('#blood-group-abo');
let bloodGroupRhInput = document.querySelector('#blood-group-rh');
let getBloodUnitsButton = document.querySelector('#get-blood-units-button');
let bloodGroupDisplay = document.querySelector('#blood-group-display');
let unitsAvailableDisplay = document.querySelector('#units-available');

getBloodUnitsButton.addEventListener('click', function() {
  let abo = bloodGroupAboInput.value;       // e.g., "A", "O", "B", "AB"
  let rh = bloodGroupRhInput.value;         // "positive" or "negative"

  let groupName = abo + rh;                 // e.g., "Apositive", "Onegative"

  // Display selected blood group
  bloodGroupDisplay.textContent = groupName;

  // Fetch data from the API
  fetch(`https://blood-group-api.wl.r.appspot.com/api/blood_units_by_group/${groupName}`)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      unitsAvailableDisplay.textContent = data.units;
    })
    .catch(error => {
      console.error('Error fetching blood units:', error);
      unitsAvailableDisplay.textContent = 'Error retrieving data';
    });
});
</script>


</body>
</html>
